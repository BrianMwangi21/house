"use strict";
require("rxjs/add/operator/map");
var SharedUtils = (function () {
    function SharedUtils() {
    }
    SharedUtils.overlay = function (updates, obj) {
        for (var prop in updates) {
            if (obj.hasOwnProperty(prop)) {
                obj[prop] = updates[prop];
            }
        }
        return obj;
    };
    SharedUtils.mapLevelDimensions = function (level) {
        switch (level) {
            case 8:
                return {
                    cols: 10,
                    rows: 10
                };
            case 7:
                return {
                    cols: 9,
                    rows: 9
                };
            case 6:
                return {
                    cols: 8,
                    rows: 8
                };
            case 5:
                return {
                    cols: 7,
                    rows: 7
                };
            case 4:
                return {
                    cols: 6,
                    rows: 6
                };
            case 3:
                return {
                    cols: 5,
                    rows: 5
                };
            case 2:
                return {
                    cols: 4,
                    rows: 4
                };
            default:
                return {
                    cols: 3,
                    rows: 3
                };
        }
    };
    SharedUtils.isEven = function (x) {
        return (x % 2) == 0;
    };
    SharedUtils.isValid = function (sequence) {
        var inversionCounts = [], inversionSum = 0;
        sequence.map(function (a, x, arr) {
            var inversions = arr.filter(function (b, y) {
                return y > x && b < a;
            });
            if (inversions.length) {
                inversionCounts.push(inversions.length);
            }
            else {
                inversionCounts.push(0);
            }
        });
        inversionCounts.map(function (cnt) {
            inversionSum += cnt;
        });
        return SharedUtils.isEven(inversionSum);
    };
    SharedUtils.generateSequence = function (min, max, count) {
        var range = [], num = 0, matches = [], i = 0;
        while (i < count) {
            num = Math.floor(Math.random() * (max - min + 1)) + min;
            matches = range.filter(function (elem) {
                return elem == num;
            });
            if (matches.length == 0) {
                range.push(num);
                i++;
            }
        }
        return range;
    };
    SharedUtils.generateGameSequence = function (min, max, count) {
        var sequence = SharedUtils.generateSequence(min, max, count);
        while (!SharedUtils.isValid(sequence)) {
            sequence = SharedUtils.generateSequence(min, max, count);
        }
        return sequence;
    };
    SharedUtils.onCallback = function (args, fn, scope) {
        if (typeof fn === 'function') {
            if (scope) {
                fn.apply(scope, args);
            }
            else {
                fn(args);
            }
        }
    };
    return SharedUtils;
}());
exports.SharedUtils = SharedUtils;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhcmVkLXV0aWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2hhcmVkLXV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxpQ0FBK0I7QUFFL0I7SUFBQTtJQTRIQSxDQUFDO0lBMUhVLG1CQUFPLEdBQWQsVUFBZSxPQUFXLEVBQUUsR0FBTztRQUMvQixHQUFHLENBQUEsQ0FBQyxJQUFJLElBQUksSUFBSSxPQUFPLENBQUMsQ0FBQSxDQUFDO1lBQ3JCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMzQixHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzVCLENBQUM7UUFDTCxDQUFDO1FBQ0QsTUFBTSxDQUFDLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFFTSw4QkFBa0IsR0FBekIsVUFBMEIsS0FBWTtRQUNsQyxNQUFNLENBQUEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ1gsS0FBSyxDQUFDO2dCQUNGLE1BQU0sQ0FBQztvQkFDSCxJQUFJLEVBQUUsRUFBRTtvQkFDUixJQUFJLEVBQUUsRUFBRTtpQkFDWCxDQUFBO1lBQ0wsS0FBSyxDQUFDO2dCQUNGLE1BQU0sQ0FBQztvQkFDSCxJQUFJLEVBQUUsQ0FBQztvQkFDUCxJQUFJLEVBQUUsQ0FBQztpQkFDVixDQUFBO1lBQ0wsS0FBSyxDQUFDO2dCQUNGLE1BQU0sQ0FBQztvQkFDSCxJQUFJLEVBQUUsQ0FBQztvQkFDUCxJQUFJLEVBQUUsQ0FBQztpQkFDVixDQUFBO1lBQ0wsS0FBSyxDQUFDO2dCQUNGLE1BQU0sQ0FBQztvQkFDSCxJQUFJLEVBQUUsQ0FBQztvQkFDUCxJQUFJLEVBQUUsQ0FBQztpQkFDVixDQUFBO1lBQ0wsS0FBSyxDQUFDO2dCQUNGLE1BQU0sQ0FBQztvQkFDSCxJQUFJLEVBQUUsQ0FBQztvQkFDUCxJQUFJLEVBQUUsQ0FBQztpQkFDVixD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S0FBSyxDQUFDLENBQUM7UUFDN0QsQ0FBQztRQUNELE1BQU0sQ0FBQyxRQUFRLENBQUM7SUFDcEIsQ0FBQztJQUVNLHNCQUFVLEdBQWpCLFVBQWtCLElBQVEsRUFBRSxFQUFNLEVBQUUsS0FBUztRQUN6QyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQzNCLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ1IsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDMUIsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNKLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNiLENBQUM7UUFDTCxDQUFDO0lBQ0wsQ0FBQztJQUVMLGtCQUFDO0FBQUQsQ0FBQyxBQTVIRCxJQTRIQztBQTVIWSxrQ0FBVyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcInJ4anMvYWRkL29wZXJhdG9yL21hcFwiO1xuXG5leHBvcnQgY2xhc3MgU2hhcmVkVXRpbHMge1xuXG4gICAgc3RhdGljIG92ZXJsYXkodXBkYXRlczphbnksIG9iajphbnkpOmFueSB7XG4gICAgICAgIGZvcihsZXQgcHJvcCBpbiB1cGRhdGVzKXtcbiAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgICAgICBvYmpbcHJvcF09dXBkYXRlc1twcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIHN0YXRpYyBtYXBMZXZlbERpbWVuc2lvbnMobGV2ZWw6bnVtYmVyKTphbnkge1xuICAgICAgICBzd2l0Y2gobGV2ZWwpIHtcbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBjb2xzOiAxMCxcbiAgICAgICAgICAgICAgICAgICAgcm93czogMTBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY29sczogOSxcbiAgICAgICAgICAgICAgICAgICAgcm93czogOVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBjb2xzOiA4LFxuICAgICAgICAgICAgICAgICAgICByb3dzOiA4XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHM6IDcsXG4gICAgICAgICAgICAgICAgICAgIHJvd3M6IDdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY29sczogNixcbiAgICAgICAgICAgICAgICAgICAgcm93czogNlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBjb2xzOiA1LFxuICAgICAgICAgICAgICAgICAgICByb3dzOiA1XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHM6IDQsXG4gICAgICAgICAgICAgICAgICAgIHJvd3M6IDRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHM6IDMsXG4gICAgICAgICAgICAgICAgICAgIHJvd3M6IDNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgaXNFdmVuICh4Om51bWJlcikge1xuICAgICAgICByZXR1cm4gKHggJSAyKSA9PSAwO1xuICAgIH1cblxuICAgIHN0YXRpYyBpc1ZhbGlkIChzZXF1ZW5jZTpudW1iZXJbXSk6Ym9vbGVhbiB7XG5cbiAgICAgICAgbGV0IGludmVyc2lvbkNvdW50czpudW1iZXJbXSA9IFtdLFxuICAgICAgICAgICAgaW52ZXJzaW9uU3VtOm51bWJlciA9IDA7XG5cblxuICAgICAgICBzZXF1ZW5jZS5tYXAoZnVuY3Rpb24gKGE6bnVtYmVyLCB4Om51bWJlciwgYXJyKSB7XG4gICAgICAgICAgICB2YXIgaW52ZXJzaW9ucyA9IGFyci5maWx0ZXIoZnVuY3Rpb24gKGI6bnVtYmVyLCB5Om51bWJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB5ID4geCAmJiBiIDwgYTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoaW52ZXJzaW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpbnZlcnNpb25Db3VudHMucHVzaChpbnZlcnNpb25zLmxlbmd0aCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGludmVyc2lvbkNvdW50cy5wdXNoKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpbnZlcnNpb25Db3VudHMubWFwKGZ1bmN0aW9uIChjbnQpIHtcbiAgICAgICAgICAgIGludmVyc2lvblN1bSArPSBjbnQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBTaGFyZWRVdGlscy5pc0V2ZW4oaW52ZXJzaW9uU3VtKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2VuZXJhdGVTZXF1ZW5jZSAobWluOm51bWJlciwgbWF4Om51bWJlciwgY291bnQ6bnVtYmVyKTpudW1iZXJbXSB7XG5cbiAgICAgICAgbGV0IHJhbmdlOm51bWJlcltdID0gW10sXG4gICAgICAgICAgICBudW06bnVtYmVyID0gMCxcbiAgICAgICAgICAgIG1hdGNoZXM6bnVtYmVyW10gPSBbXSxcbiAgICAgICAgICAgIGk6bnVtYmVyID0gMDtcblxuICAgICAgICB3aGlsZSAoaSA8IGNvdW50KSB7XG4gICAgICAgICAgICBudW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xuICAgICAgICAgICAgbWF0Y2hlcyA9IHJhbmdlLmZpbHRlcihmdW5jdGlvbiAoZWxlbTpudW1iZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbSA9PSBudW07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2UucHVzaChudW0pO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByYW5nZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2VuZXJhdGVHYW1lU2VxdWVuY2UobWluOm51bWJlciwgbWF4Om51bWJlciwgY291bnQ6bnVtYmVyKTpudW1iZXJbXSB7XG4gICAgICAgIHZhciBzZXF1ZW5jZTpudW1iZXJbXSA9IFNoYXJlZFV0aWxzLmdlbmVyYXRlU2VxdWVuY2UobWluLCBtYXgsIGNvdW50KTtcbiAgICAgICAgd2hpbGUgKCFTaGFyZWRVdGlscy5pc1ZhbGlkKHNlcXVlbmNlKSkge1xuICAgICAgICAgICAgc2VxdWVuY2UgPSBTaGFyZWRVdGlscy5nZW5lcmF0ZVNlcXVlbmNlKG1pbiwgbWF4LCBjb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcXVlbmNlO1xuICAgIH1cblxuICAgIHN0YXRpYyBvbkNhbGxiYWNrKGFyZ3M6YW55LCBmbjphbnksIHNjb3BlOmFueSk6dm9pZCB7XG4gICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGlmIChzY29wZSkge1xuICAgICAgICAgICAgICAgIGZuLmFwcGx5KHNjb3BlLCBhcmdzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm4oYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbiJdfQ==