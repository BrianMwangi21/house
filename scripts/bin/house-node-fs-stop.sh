#!/bin/bash
# ---------------------------------------------------------------------------------------------------|
#  School / Organization   : bedlington.io___________________________________________________________|
#  Specification           : N/A_____________________________________________________________________|
#  Specification Path      : N/A_____________________________________________________________________|
#  Author                  : brady house_____________________________________________________________|
#  Create date             : 03/19/2015______________________________________________________________|
#  Description             : UTILITY USED TO STOP A NODE.JS FILE SERVER ON PORT 8889_________________|
#  Command line Arguments  : N/A_____________________________________________________________________|
# ---------------------------------------------------------------------------------------------------|
#  Revision History::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::|
# ---------------------------------------------------------------------------------------------------|
# Baseline Ver.
# ---------------------------------------------------------------------------------------------------|

_pid=$(lsof -i:8889 -t || echo '-1')  # Capture Process Id

#try
(
  # Verify pid found
  if [[ ${_pid} -eq "-1" ]]; then exit 0; fi

  # Kill the process
  $(lsof -i:8889 -t | xargs kill;) || exit 86

)
#catch
_rc=$?
case ${_rc} in
    0)  echo "http://localhost:8889 ~ is dead."
        ;;
    86) echo "FUBAR ~ Attempt to kill Pid = ${_pid} failed."
        ;;
    *)  echo "An unknown error has occurred. Haaa-Ha! You Win :)"
        ;;
esac
#bubble up (re-throw)
exit ${_rc}

